/*
 * XenForo tooltip.min.js
 * Copyright 2010-2017 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,l,e){c instanceof String&&(c=String(c));for(var a=c.length,b=0;b<a;b++){var d=c[b];if(l.call(e,d,b,c))return{i:b,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,l,e){c!=Array.prototype&&c!=Object.prototype&&(c[l]=e.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,l,e,a){if(l){e=$jscomp.global;c=c.split(".");for(a=0;a<c.length-1;a++){var b=c[a];b in e||(e[b]={});e=e[b]}c=c[c.length-1];a=e[c];l=l(a);l!=a&&null!=l&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:l})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,e){return $jscomp.findInternal(this,c,e).v}},"es6","es3");
!function(c,l,e){XF.TooltipElement=XF.create({options:{baseClass:"tooltip",extraClass:"tooltip--basic",html:!1,inViewport:!0,loadRequired:!1,loadParams:null,placement:"top"},content:null,$tooltip:null,shown:!1,shownFully:!1,placement:null,positioner:null,loadRequired:!1,loading:!1,contentApplied:!1,setupCallbacks:null,__construct:function(a,b,d){this.setupCallbacks=[];this.options=c.extend(!0,{},this.options,b);this.content=a;this.loadRequired=this.options.loadRequired;d&&this.setPositioner(d)},setPositioner:function(a){this.positioner=
a},addSetupCallback:function(a){this.$tooltip?a(this.$tooltip):this.setupCallbacks.push(a)},show:function(){if(!this.shown)if(this.shown=!0,this.loadRequired)this.loadContent();else{var a=this.getTooltip(),b=this;this.reposition();c(l).on("resize.tooltip-"+a.xfUniqueId(),c.proxy(this,"reposition"));a.trigger("tooltip:shown").stop().css({visibility:"",display:"none"}).fadeIn("fast",function(){b.shownFully=!0})}},hide:function(){if(this.shown){this.shownFully=this.shown=!1;var a=this.$tooltip;a&&(a.stop().fadeOut("fast").trigger("tooltip:hidden"),
c(l).off("resize.tooltip-"+a.xfUniqueId()))}},toggle:function(){this.shown?this.hide():this.show()},destroy:function(){this.$tooltip&&this.$tooltip.remove()},isShown:function(){return this.shown},isShownFully:function(){return this.shown&&this.shownFully},requiresLoad:function(){return this.loadRequired},getPlacement:function(){return XF.rtlFlipKeyword(this.options.placement)},reposition:function(){var a=this.positioner;if(!a)console.error("No tooltip positioner");else if(!this.loadRequired){var b=
this.options.inViewport;if(a instanceof c){var d=a.dimensions(!0);a.closest(".overlay").length&&(b=!0)}else"undefined"!==typeof a[0]&&"undefined"!==typeof a[1]?d={top:a[1],right:a[0],bottom:a[1],left:a[0]}:"undefined"!==typeof a.right&&"undefined"!==typeof a.bottom?d=a:console.error("Positioner is not in correct format",a);d.width=d.right-d.left;d.height=d.bottom-d.top;a=this.getTooltip();var f=this.getPlacement(),m=this.options.baseClass,k=f;if(b){var n=c(l);b=n.height();var g=n.width();var e=n.scrollTop();
n=n.scrollLeft();var h;(h=XF.Element.getHandlers("sticky-header"))&&h[0].$target.hasClass(h[0].options.stickyClass)&&(e+=h[0].$target.outerHeight());g={top:e,left:n,right:n+g,bottom:e+b,width:g,height:b}}else g=c("body").dimensions();this.placement&&a.removeClass(m+"--"+this.placement);a.addClass(m+"--"+f).css({visibility:"hidden",display:"block",top:"",bottom:"",left:"",right:"","padding-left":"","padding-right":"","padding-top":"","padding-bottom":""});h=a.outerWidth();b=a.outerHeight();"top"==
f&&d.top-b<g.top?f="bottom":"bottom"==f&&d.bottom+b>g.bottom?d.top-b>=g.top&&(f="top"):"left"==f&&d.left-h<g.left?f=d.right+h>g.right?d.top-b<g.top?"bottom":"top":"right":"right"==f&&d.right+h>g.right&&(f=d.left-h<g.left?d.top-b<g.top?"bottom":"top":"left");f!=k&&a.removeClass(m+"--"+k).addClass(m+"--"+f);k={top:"",right:"",bottom:"",left:""};switch(f){case "top":k.bottom=c(l).height()-d.top;k.left=d.left+d.width/2-h/2;break;case "bottom":k.top=d.bottom;k.left=d.left+d.width/2-h/2;break;case "left":k.top=
d.top+d.height/2-b/2;k.right=c(l).width()-d.left;break;default:k.top=d.top+d.height/2-b/2,k.left=d.right}a.css(k);e=a.dimensions(!0);b=d=0;m=a.find("."+m+"-arrow");if("left"==f||"right"==f)e.top<g.top?d=g.top-e.top:e.bottom>g.bottom&&(d=g.bottom-e.bottom),m.css({left:"",top:50-100*d/e.top+"%"});else{e.left<g.left?b=g.left-e.left:e.left+h>g.right&&(b=g.right-(e.left+h));g=parseInt(h/100*(50-100*b/h),0);var p=g+parseInt(m.css("margin-left")),q=p+m.outerWidth();e=parseInt(a.css("padding-left"),10);n=
parseInt(a.css("padding-right"),10);p<e?(h=e-p,a.css({"padding-left":Math.max(0,e-h),"padding-right":n+h})):q>h-n&&(h=q-(h-n),a.css({"padding-left":n+h,"padding-right":Math.max(0,n-h)}));m.css({top:"",left:g})}b?a.css("left",k.left+b):d&&a.css("top",k.top+d);this.placement=f;this.shown&&!this.loadRequired&&a.css("visibility","")}},attach:function(){this.getTooltip()},getTooltip:function(){if(!this.$tooltip){var a=this.getTemplate();a.appendTo("body");this.$tooltip=a;this.loadRequired||this.applyTooltipContent()}return this.$tooltip},
applyTooltipContent:function(){if(this.contentApplied||this.loadRequired)return!1;var a=this.getTooltip(),b=a.find("."+this.options.baseClass+"-content"),d=this.content;c.isFunction(d)&&(d=d());this.options.html?(b.html(d),b.find("img").on("load",c.proxy(this,"reposition"))):b.text(d);b=this.setupCallbacks;for(d=0;d<b.length;d++)b[d](a);XF.activate(a);return this.contentApplied=!0},loadContent:function(){if(this.loadRequired&&!this.loading){var a=this.content,b=this,d=function(a){b.content=a;b.loadRequired=
!1;b.loading=!1;b.applyTooltipContent();b.shown&&(b.shown=!1,b.show())};c.isFunction(a)?(this.loading=!0,a(d,this.options.loadParams)):d("")}},getTemplate:function(){var a=this.options.baseClass;return c(c.parseHTML('<div class="'+a+(this.options.extraClass?" "+this.options.extraClass:"")+'" role="tooltip"><div class="'+a+'-arrow"></div><div class="'+a+'-content"></div></div>'))}});XF.TooltipTrigger=XF.create({options:{delayIn:200,delayInLoading:800,delayOut:200,trigger:"hover focus",maintain:!1,
clickHide:null,onShow:null,onHide:null},$target:null,tooltip:null,delayTimeout:null,delayTimeoutType:null,stopFocusBefore:null,clickTriggered:!1,$covers:null,__construct:function(a,b,d){this.options=c.extend(!0,{},this.options,d);this.$target=a;this.tooltip=b;b.setPositioner(a);b.addSetupCallback(c.proxy(this,"onTooltipSetup"));a.xfUniqueId();XF.TooltipTrigger.cache[a.attr("id")]=this},init:function(){var a=this.$target,b=!1,d=!1,f=this;null===this.options.clickHide&&(this.options.clickHide=a.is("a"));
for(var e=this.options.trigger.split(" "),k=0;k<e.length;k++)switch(e[k]){case "hover":a.on({"mouseenter.tooltip":c.proxy(this,"mouseEnter"),"mouseleave.tooltip":c.proxy(this,"leave")});break;case "focus":a.on({"focusin.tooltip":c.proxy(this,"focusEnter"),"focusout.tooltip":c.proxy(this,"leave")});break;case "click":b=!0;a.on("click.tooltip",c.proxy(this,"click"));a.on("auxclick.tooltip contextmenu.tooltip",function(){f.cancelShow();f.stopFocusBefore=Date.now()+2E3});break;case "touchclick":d=!0,
a.on("click.tooltip",function(a){XF.isEventTouchTriggered(a)&&f.click(a)})}b&&d&&console.error("Cannot have touchclick and click triggers");if(!b&&this.options.clickHide)a.on("click.tooltip auxclick.tooltip contextmenu.tooltip",function(a){d&&XF.isEventTouchTriggered(a)||(f.hide(),f.stopFocusBefore=Date.now()+2E3)});a.on({"tooltip:show":c.proxy(this,"show"),"tooltip:hide":c.proxy(this,"hide"),"tooltip:reposition":c.proxy(this,"reposition")})},reposition:function(){this.tooltip.reposition()},click:function(a){0<
a.button||a.ctrlKey||a.shiftKey||a.metaKey||a.altKey?this.cancelShow():this.tooltip.isShown()?this.tooltip.isShownFully()?this.hide():(a.preventDefault(),this.clickShow(a)):(a.preventDefault(),this.clickShow(a))},clickShow:function(a){this.clickTriggered=!0;var b=this;setTimeout(function(){var d=b.addCovers();if(XF.isEventTouchTriggered(a))d.addClass("is-active");else c(e).on("click.tooltip-"+b.$target.xfUniqueId(),c.proxy(b,"docClick"))},0);this.show()},addCovers:function(){this.$covers&&this.$covers.remove();
var a=this.$target.dimensions(),b=[];b.push({top:0,height:a.top,left:0,right:0});b.push({top:a.top,height:a.height,left:0,width:a.left});b.push({top:a.top,height:a.height,left:a.right,right:0});b.push({top:a.bottom,height:c("html").height()-a.bottom,left:0,right:0});a=c();for(var d,f=0;f<b.length;f++)d=c('<div class="tooltipCover" />').css(b[f]),a=a.add(d);a.on("click",c.proxy(this,"hide"));this.tooltip.getTooltip().before(a);this.$covers=a;XF.setRelativeZIndex(a,this.$target);return a},docClick:function(a){var b=
this.$covers;var d=a.pageX;var f=a.pageY,m=c(l);b&&(0==a.screenX&&0==a.screenY&&(a=c(a.target).dimensions(),d=a.left,f=a.top),b.addClass("is-active"),d=c(e.elementFromPoint(d-m.scrollLeft(),f-m.scrollTop())),b.removeClass("is-active"),d.is(b)&&this.hide())},mouseEnter:function(a){XF.isEventTouchTriggered(a)||this.enter()},focusEnter:function(a){XF.isEventTouchTriggered(a)||(!this.stopFocusBefore||Date.now()>=this.stopFocusBefore)&&this.enter()},enter:function(){if(!this.isShown()||!this.clickTriggered){this.clickTriggered=
!1;var a=this.tooltip.requiresLoad()?this.options.delayInLoading:this.options.delayIn;if(a){if("enter"!==this.delayTimeoutType&&this.resetDelayTimer(),!this.delayTimeoutType&&!this.isShown()){this.delayTimeoutType="enter";var b=this;this.delayTimeout=setTimeout(function(){b.delayTimeoutType=null;b.show()},a)}}else this.show()}},leave:function(){if(!this.clickTriggered){var a=this.options.delayOut;if(a){if("leave"!==this.delayTimeoutType&&this.resetDelayTimer(),!this.delayTimeoutType&&this.isShown()){this.delayTimeoutType=
"leave";var b=this;this.delayTimeout=setTimeout(function(){b.delayTimeoutType=null;b.hide()},a)}}else this.hide()}},show:function(){var a=this;c(l).off("focus.tooltip-"+this.$target.xfUniqueId()).on("focus.tooltip-"+this.$target.xfUniqueId(),function(b){a.stopFocusBefore=Date.now()+250});XF.setRelativeZIndex(this.tooltip.getTooltip(),this.$target);if(this.options.onShow){var b=this.options.onShow;b(this,this.tooltip)}this.tooltip.show()},cancelShow:function(){"enter"===this.delayTimeoutType?this.resetDelayTimer():
this.tooltip.isShownFully()||this.hide()},hide:function(){this.tooltip.hide();this.resetDelayTimer();this.clickTriggered=!1;this.$covers&&(this.$covers.remove(),this.$covers=null);c(e).off("click.tooltip-"+this.$target.xfUniqueId());if(this.options.onHide){var a=this.options.onHide;a(this,this.tooltip)}},toggle:function(){this.isShown()?this.hide():this.show()},isShown:function(){return this.tooltip.isShown()},wasClickTriggered:function(){return this.clickTriggered},resetDelayTimer:function(){this.delayTimeoutType&&
(clearTimeout(this.delayTimeout),this.delayTimeoutType=null)},addMaintainElement:function(a){if(!a.data("tooltip-maintain")){for(var b=this.options.trigger.split(" "),d=0;d<b.length;d++)switch(b[d]){case "hover":a.on("mouseenter.tooltip",c.proxy(this,"enter"));a.on("mouseleave.tooltip",c.proxy(this,"leave"));break;case "focus":a.on("focusin.tooltip",c.proxy(this,"enter")),a.on("focusout.tooltip",c.proxy(this,"leave"))}a.data("tooltip-maintain",!0)}},removeMaintainElement:function(a){a.off(".tooltip");
a.data("tooltip-maintain",!1)},onTooltipSetup:function(a){if(this.options.maintain){this.addMaintainElement(a);var b=this;a.on("menu:opened",function(a,c){b.addMaintainElement(c)});a.on("menu:closed",function(a,c){b.removeMaintainElement(c)})}}});XF.TooltipTrigger.cache={};XF.TooltipOptions={base:{baseClass:"tooltip",extraClass:"tooltip--basic",html:!1,inViewport:!0,placement:"top",clickHide:null,delayIn:200,delayOut:200,maintain:!1,trigger:"hover focus"},tooltip:["baseClass","extraClass","html",
"placement"],trigger:["clickHide","delayIn","delayOut","maintain","trigger"],extract:function(a,b){for(var d={},c=0;c<a.length;c++)d[a[c]]=b[a[c]];return d},extractTooltip:function(a){return this.extract(this.tooltip,a)},extractTrigger:function(a){return this.extract(this.trigger,a)}};XF.Tooltip=XF.Element.newHandler({options:c.extend(!0,{},XF.TooltipOptions.base,{content:null}),trigger:null,tooltip:null,init:function(){var a=this.getContent(),b=XF.TooltipOptions.extractTooltip(this.options),d=XF.TooltipOptions.extractTrigger(this.options);
this.tooltip=new XF.TooltipElement(a,b);this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,d);this.trigger.init()},getContent:function(){if(this.options.content)return this.options.content;var a=this.$target,b=a.attr("data-original-title")||a.attr("title")||"";a.attr("data-original-title",b).removeAttr("title");return b}});XF.ElementTooltip=XF.extend(XF.Tooltip,{__backup:{getContent:"_getContent",init:"_init"},options:c.extend({},XF.Tooltip.prototype.options,{element:null,showError:!0,noTouch:!0,
shortcut:null}),$element:null,init:function(){this.options.shortcut&&this.setupShortcut(this.options.shortcut);if(!this.options.noTouch||!Modernizr.touchevents){var a=this.options.element,b=this.options.showError;if(a){var d=XF.findRelativeIf(a,this.$target);d.length?(this.$element=d,this.$target.removeAttr("title"),this.options.html=!0,this._init()):b&&console.error("Element tooltip could not find "+a)}else b&&console.error("No element specified for the element tooltip")}},setupShortcut:function(a){"node-description"==
a&&(this.options.element||(this.options.element="< .js-nodeMain | .js-nodeDescTooltip"),this.options.showError=!1,this.options.maintain=!0,this.options.placement="right",this.options.extraClass="tooltip--basic tooltip--description")},getContent:function(){return this.$element.clone().contents()}});XF.PreviewTooltip=XF.Element.newHandler({options:{delay:600,previewUrl:null},trigger:null,tooltip:null,init:function(){this.options.previewUrl?(this.tooltip=new XF.TooltipElement(c.proxy(this,"getContent"),
{extraClass:"tooltip--preview",html:!0,loadRequired:!0}),this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay}),this.trigger.init()):console.error("No preview URL")},getContent:function(a){var b=this;XF.ajax("get",this.options.previewUrl,{},function(d){b.loaded(d,a)},{skipDefault:!0,skipError:!0,global:!1})},loaded:function(a,b){a.html&&XF.setupHtmlInsert(a.html,function(a,c,e){b(a)})}});XF.MemberTooltipCache={};XF.MemberTooltip=
XF.Element.newHandler({options:{delay:600},trigger:null,tooltip:null,userId:null,init:function(){this.userId=this.$target.data("user-id");this.tooltip=new XF.TooltipElement(c.proxy(this,"getContent"),{extraClass:"tooltip--member",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:"hover focus click",onShow:c.proxy(this,"onShow"),onHide:c.proxy(this,"onHide")});this.trigger.init()},
getContent:function(a){var b=XF.MemberTooltipCache[this.userId];if(b)b=c(c.parseHTML(b)),a(b);else{var d=this;b={skipDefault:!0,skipError:!0,global:!1};this.trigger.wasClickTriggered()&&(b.global=!0);XF.ajax("get",this.$target.attr("href"),{tooltip:!0},function(b){d.loaded(b,a)},b)}},loaded:function(a,b){if(a.html){var d=this.userId;XF.setupHtmlInsert(a.html,function(c,e,k){XF.MemberTooltipCache[d]=a.html.content;b(c)})}},onShow:function(){var a=XF.MemberTooltip.activeTooltip;a&&a!==this&&a.hide();
XF.MemberTooltip.activeTooltip=this},onHide:function(){XF.MemberTooltip.activeTooltip===this&&(XF.MemberTooltip.activeTooltip=null)},show:function(){this.trigger.show()},hide:function(){this.trigger.hide()}});XF.MemberTooltip.activeTooltip=null;XF.Element.register("element-tooltip","XF.ElementTooltip");XF.Element.register("member-tooltip","XF.MemberTooltip");XF.Element.register("preview-tooltip","XF.PreviewTooltip");XF.Element.register("tooltip","XF.Tooltip")}(jQuery,window,document);
